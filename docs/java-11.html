<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Java 11 | VF_Tech</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Java 11" />
<meta name="author" content="Vlad" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="But Java is already at version 15, why talk about 11 ?! Well,…but before that, a note of caution: considering the release cycle of Java nowadays, it might be that the current version of Java at the time you are reading this is bigger than 15, it was 15 when I wrote this post!" />
<meta property="og:description" content="But Java is already at version 15, why talk about 11 ?! Well,…but before that, a note of caution: considering the release cycle of Java nowadays, it might be that the current version of Java at the time you are reading this is bigger than 15, it was 15 when I wrote this post!" />
<link rel="canonical" href="https://vladflore.github.io/java-11" />
<meta property="og:url" content="https://vladflore.github.io/java-11" />
<meta property="og:site_name" content="VF_Tech" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-09-22T00:00:00+02:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"Java 11","dateModified":"2020-09-22T00:00:00+02:00","datePublished":"2020-09-22T00:00:00+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://vladflore.github.io/java-11"},"author":{"@type":"Person","name":"Vlad"},"description":"But Java is already at version 15, why talk about 11 ?! Well,…but before that, a note of caution: considering the release cycle of Java nowadays, it might be that the current version of Java at the time you are reading this is bigger than 15, it was 15 when I wrote this post!","url":"https://vladflore.github.io/java-11","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/css/custom.css"><link type="application/atom+xml" rel="alternate" href="https://vladflore.github.io/feed.xml" title="VF_Tech" /><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-171602576-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-171602576-1');
</script>
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">VF_Tech</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about">About</a><a class="page-link" href="/contact">Contact</a><a class="page-link" href="/cv">Curriculum Vitae</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <header class="post-header">
        <h1 class="post-title p-name" itemprop="name headline">Java 11</h1>
        <p class="post-meta">
            created on:
            <time class="dt-published" datetime="2020-09-22T00:00:00+02:00" itemprop="datePublished">Sep 22, 2020
            </time>&nbsp;by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Vlad</span></span></p>
    </header>

    <div class="post-content e-content" itemprop="articleBody">
        <p>But <a href="https://www.oracle.com/java/technologies/javase-downloads.html" target="_blank">Java</a> is already at version 15, why talk about 11 ?! Well,…but before that, a note of caution:
considering the release cycle of Java nowadays, it might be that the current version of Java at the time you are reading this 
is bigger than 15, it was 15 when I wrote this post!</p>

<p>Now, let’s continue…</p>

<p>Java 11 is the current (see note of caution above) LTS version, and will stay like that until Java 17 appears, which should be
somewhere around the end of 2021, which is then the new LTS version (all of this hold true iff Oracle doesn’t change something in the whole release plan).</p>

<p>Oracle’s latest <a href="https://education.oracle.com/java-se-11-developer/pexam_1Z0-819" target="_blank">certification</a> related to Java is for version 11, again, if they do not change anything, by the time you are reading this.</p>

<p>Besides, Java 11 has lots of new cool features, some of which I will be addressing in this post. Please note, that some features reached maturity with <em>this</em> version and were included as stable enhancements in the language.</p>

<p>For a complete, detailed and kinda scary compilation of all the changes check <a href="https://cr.openjdk.java.net/~iris/se/11/latestSpec/apidiffs/overview-summary.html" target="_blank">this link</a>.</p>

<p>In this post I’ll be giving a short intro with examples about <a href="https://openjdk.java.net/jeps/330" target="_blank">JEP 330</a> and <em>shebang</em> files.</p>

<h4 id="environment-configuration">Environment configuration</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>OS: Ubuntu 20.04.1 LTS
</code></pre></div></div>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nv">$ </span>java <span class="nt">--version</span>
openjdk 11.0.8 2020-07-14
OpenJDK Runtime Environment AdoptOpenJDK <span class="o">(</span>build 11.0.8+10<span class="o">)</span>
OpenJDK 64-Bit Server VM AdoptOpenJDK <span class="o">(</span>build 11.0.8+10, mixed mode<span class="o">)</span></code></pre></figure>

<p>I use <a href="https://sdkman.io/">sdkman</a> to manage the versions of Java I use on my system and as such I have this:</p>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nv">$ </span>whereis java
java: /etc/java /usr/share/java /home/vlad/.sdkman/candidates/java/11.0.8.hs-adpt/bin/java
<span class="nv">$ </span>which java
/home/vlad/.sdkman/candidates/java/current/bin/java
<span class="nv">$ </span>ll /home/vlad/.sdkman/candidates/java/
...
drwxr-xr-x 5 vlad vlad 4096 Sep 21 23:22 ./
drwxr-xr-x 5 vlad vlad 4096 Jun 30 17:24 ../
drwxr-xr-x 9 vlad vlad 4096 Jul 15 11:08 11.0.8.hs-adpt/
drwxr-xr-x 9 vlad vlad 4096 Jul 15 11:13 14.0.2.hs-adpt/
drwxr-xr-x 8 vlad vlad 4096 Jul 28 17:21 8.0.265.hs-adpt/
lrwxrwxrwx 1 vlad vlad   14 Sep 21 23:21 current -&gt; 11.0.8.hs-adpt/</code></pre></figure>

<p>Now, on to some cool feature of Java 11…</p>

<h3 id="launch-single-file-source-code-programs">Launch single-file source-code programs</h3>

<p>As per <a href="https://openjdk.java.net/jeps/330" target="_blank">JEP 330</a> we now have the possibility to launch single-file source-code programs.</p>

<p>Let’s code the simplest, politest Java program:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Greeter</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello "</span> <span class="o">+</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">+</span> <span class="s">"!"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Normally we would need to compile it with <code class="highlighter-rouge">javac</code> and get that <code class="highlighter-rouge">.class</code> file and then run it with <code class="highlighter-rouge">java</code> to see the greeting,
but now we can just do:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>java Greeter.java Vlad
Hello Vlad!
</code></pre></div></div>

<p>Now let’s turn this into a <em>shebang file</em> and use it like a script, a Java Script…mind the gap ;)</p>

<p>The main idea is to add a line (contains the path to the java binary) similar to this <code class="highlighter-rouge">#!/home/vlad/.sdkman/candidates/java/11.0.8.hs-adpt/bin/java --source 11</code> 
at the beginning of a file and then the Java code after it, make the new file executable and execute it like any other sh file. 
By the way, we can choose any name we want for the script file.</p>

<p>Content of <code class="highlighter-rouge">greet</code> file:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">#</span><span class="o">!/</span><span class="n">home</span><span class="o">/</span><span class="n">vlad</span><span class="o">/.</span><span class="na">sdkman</span><span class="o">/</span><span class="n">candidates</span><span class="o">/</span><span class="n">java</span><span class="o">/</span><span class="mf">11.0</span><span class="o">.</span><span class="mi">8</span><span class="o">.</span><span class="na">hs</span><span class="o">-</span><span class="n">adpt</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">java</span> <span class="o">--</span><span class="n">source</span> <span class="mi">11</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Greeter</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello "</span> <span class="o">+</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">+</span> <span class="s">"!"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>make it executable:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">chmod </span>u+x greet
</code></pre></div></div>
<p>and execute it:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./greet Vlad
Hello Vlad!
</code></pre></div></div>

<p>Let’s spice things up a bit and implement another more complex example: this time we want to take some text, line by line, 
and display only the lines that match a given regular expression (basically a simplified version of <code class="highlighter-rouge">grep</code> command).</p>

<p>Content of <code class="highlighter-rouge">grep</code> file:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">#</span><span class="o">!/</span><span class="n">home</span><span class="o">/</span><span class="n">vlad</span><span class="o">/.</span><span class="na">sdkman</span><span class="o">/</span><span class="n">candidates</span><span class="o">/</span><span class="n">java</span><span class="o">/</span><span class="mf">11.0</span><span class="o">.</span><span class="mi">8</span><span class="o">.</span><span class="na">hs</span><span class="o">-</span><span class="n">adpt</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">java</span> <span class="o">--</span><span class="n">source</span> <span class="mi">11</span>

<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.regex.Pattern</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.stream.Stream</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Grep</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="c1">// some arguments validation</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">showUsage</span><span class="o">();</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kt">var</span> <span class="n">option</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
        <span class="kt">var</span> <span class="n">strPattern</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>

        <span class="c1">// some more arguments validation and extraction of the actual arguments</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">startsWith</span><span class="o">(</span><span class="s">"-"</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">showUsage</span><span class="o">();</span>
                <span class="k">return</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">strPattern</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="mi">2</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">startsWith</span><span class="o">(</span><span class="s">"-"</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">option</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
                <span class="n">strPattern</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">showUsage</span><span class="o">();</span>
                <span class="k">return</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">// is it a case-insensitive search</span>
        <span class="kt">var</span> <span class="n">isCaseSensitive</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">option</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"-i"</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">isCaseSensitive</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kt">var</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
        <span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">lines</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">empty</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">reader</span><span class="o">.</span><span class="na">ready</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">lines</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="kt">var</span> <span class="n">regex</span> <span class="o">=</span> <span class="o">(</span><span class="n">isCaseSensitive</span> <span class="o">?</span> <span class="s">""</span> <span class="o">:</span> <span class="s">"(?i)"</span><span class="o">)</span> <span class="o">+</span> <span class="s">".*"</span> <span class="o">+</span> <span class="n">strPattern</span> <span class="o">+</span> <span class="s">".*"</span><span class="o">;</span>

        <span class="c1">// new Java 11 feature</span>
        <span class="c1">// see https://cr.openjdk.java.net/~iris/se/11/latestSpec/apidiffs/java/util/regex/Pattern.html</span>
        <span class="kt">var</span> <span class="n">asMatchPredicate</span> <span class="o">=</span> <span class="nc">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="n">regex</span><span class="o">).</span><span class="na">asMatchPredicate</span><span class="o">();</span>
        <span class="n">lines</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">asMatchPredicate</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">showUsage</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Usage: ./grep [-i] PATTERN"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Make the file executable and then you can execute it like this:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"aaa</span><span class="se">\n</span><span class="s2">bbb</span><span class="se">\n</span><span class="s2">ccc"</span> | ./grep <span class="nt">-i</span> CCC
ccc
<span class="nv">$ </span><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"aaa</span><span class="se">\n</span><span class="s2">bbb</span><span class="se">\n</span><span class="s2">ccc"</span> | ./grep <span class="nt">-i</span> C<span class="o">{</span>3<span class="o">}</span>
ccc
<span class="nv">$ </span><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"aaa</span><span class="se">\n</span><span class="s2">bbb</span><span class="se">\n</span><span class="s2">ccc</span><span class="se">\n</span><span class="s2">"</span> <span class="o">&gt;</span> content
<span class="nv">$ </span><span class="nb">cat </span>content | ./grep <span class="nt">-i</span> CCC
ccc
</code></pre></div></div>

<p>There you have it, scripting in Java has never been easier.</p>

<p>The examples are available <a href="https://github.com/vladflore/java11" target="_blank">in this GitHub repo</a>.</p>

<p>Happy coding in Java 11!</p>


    </div><a class="u-url" href="/java-11" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
    <data class="u-url" href="/"></data>
    <div class="wrapper">
        <h2 class="footer-heading">VF_Tech</h2>
        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list">
                    <li class="p-name">VF_Tech</li></ul>
            </div>
            <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/vladflore"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">vladflore</span></a></li><li><a href="https://www.twitter.com/vlad_flore"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">vlad_flore</span></a></li></ul>
</div>
            <div class="footer-col footer-col-3">
                <p>A place to share stuff about software engineering and life...but mostly about software engineering</p>
            </div>
        </div>
        <div align="center" class="copyright">
            &copy; vladflore.tech 2020 | All rights reserved<br>
            powered by <a href="https://jekyllrb.com/" target="_blank">jekyll</a> and <a href="https://github.com/jekyll/minima" target="_blank">minima theme</a>
        </div>
    </div>
</footer>
</body>

</html>
