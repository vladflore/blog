<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Shell Magic | Vlad’s Blog</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Shell Magic" />
<meta name="author" content="Vlad" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="NOTE 1: This page contains some shell magic which I came across in my daily business. I will update this page continuously and this will be reflected on this page in the date information displayed under the post name." />
<meta property="og:description" content="NOTE 1: This page contains some shell magic which I came across in my daily business. I will update this page continuously and this will be reflected on this page in the date information displayed under the post name." />
<link rel="canonical" href="https://vladflore.github.io/shell-magic" />
<meta property="og:url" content="https://vladflore.github.io/shell-magic" />
<meta property="og:site_name" content="Vlad’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-03-25T00:00:00+01:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"Shell Magic","dateModified":"2020-03-25T00:00:00+01:00","datePublished":"2020-03-25T00:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://vladflore.github.io/shell-magic"},"author":{"@type":"Person","name":"Vlad"},"description":"NOTE 1: This page contains some shell magic which I came across in my daily business. I will update this page continuously and this will be reflected on this page in the date information displayed under the post name.","url":"https://vladflore.github.io/shell-magic","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/css/custom.css"><link type="application/atom+xml" rel="alternate" href="https://vladflore.github.io/feed.xml" title="Vlad's Blog" /><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-171602576-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-171602576-1');
</script>
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Vlad&#39;s Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about">About</a><a class="page-link" href="/contact">Contact</a><a class="page-link" href="/cv">Curriculum Vitae</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <header class="post-header">
        <h1 class="post-title p-name" itemprop="name headline">Shell Magic</h1>
        <p class="post-meta">
            created on:
            <time class="dt-published" datetime="2020-03-25T00:00:00+01:00" itemprop="datePublished">Mar 25, 2020
            </time><time class="dt-published" datetime="2020-05-17T00:00:00+02:00" itemprop="datePublished">
                <span style="color: #a61717;">(last modified on: May 17, 2020)</span>
            </time>&nbsp;by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Vlad</span></span></p>
    </header>

    <div class="post-content e-content" itemprop="articleBody">
        <blockquote>
  <p><strong><em>NOTE 1:</em></strong> This page contains some shell <em>magic</em> which I came across in my daily business. I will update this page continuously
and this will be reflected on this page in the date information displayed under the post name.</p>
</blockquote>

<blockquote>
  <p><strong><em>NOTE 2:</em></strong> <em>Please be advised that some commands listed here could have unwanted effects if you are not completely sure of what they are doing and how they are doing it.
Some of them might also require sudo access, so I am just going to assume that you know what you are doing.
You have been warned!</em></p>
</blockquote>

<blockquote>
  <p><strong><em>NOTE 3:</em></strong> All the commands have been tried on <em>Ubuntu 18.04.4 LTS</em></p>
</blockquote>

<p><br /></p>

<h3 id="-1-forcibly-removing-all-directories-and-their-content-recursively"><a name="1"></a> 1. Forcibly removing all directories and their content recursively</h3>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nb">ls</span> <span class="nt">-l</span> | <span class="nb">grep</span> <span class="s1">'^d'</span> | <span class="nb">awk</span> <span class="s1">'{print $9}'</span> | xargs <span class="nb">rm</span> <span class="nt">-rf</span></code></pre></figure>

<p>In plain English, list the content of the current directory <code class="highlighter-rouge">ls</code> using the long listing format <code class="highlighter-rouge">-l</code>, filter out everything else that is not a directory <code class="highlighter-rouge">grep '^d'</code>, extract the 9^th^ column (the last containing the name of the directory) <code class="highlighter-rouge">awk '{print $9}'</code>, pass each name of the directory as an argument <code class="highlighter-rouge">xargs</code> to the command <code class="highlighter-rouge">rm</code>, which removes recursively <code class="highlighter-rouge">-r</code> and forcibly <code class="highlighter-rouge">-f</code> the respective directory.</p>

<p><strong>Resources:</strong></p>

<ul>
  <li>feel free to use the <code class="highlighter-rouge">man</code> command to read more about the programs above:
    <ul>
      <li><code class="highlighter-rouge">man ls</code></li>
      <li><code class="highlighter-rouge">man grep</code></li>
      <li><code class="highlighter-rouge">man awk</code></li>
      <li><code class="highlighter-rouge">man xargs</code></li>
      <li><code class="highlighter-rouge">man rm</code></li>
    </ul>
  </li>
</ul>

<hr />
<p><br /></p>

<h3 id="-2-switching-between-github-remote-urls-https-vs-ssh"><a name="2"></a> 2. Switching between GitHub remote URLs (HTTPS vs. SSH)</h3>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh">git remote <span class="nt">-v</span>
git remote set-url origin git@github.com:USERNAME/REPOSITORY.git
git remote set-url origin https://github.com/USERNAME/REPOSITORY.git</code></pre></figure>

<p>First we check what kind of remote URLs we have, using option <code class="highlighter-rouge">-v</code> of command <code class="highlighter-rouge">git remote</code>,
afterwards we change the remote URL to either HTTPS or SSH using one of the last two commands
(note the two different URL styles for setting the remote name <code class="highlighter-rouge">origin</code>). Do not forget
to replace the <code class="highlighter-rouge">USERNAME</code> and <code class="highlighter-rouge">REPOSITORY</code> with the real values.</p>

<p><strong>Resources:</strong></p>

<ul>
  <li><a href="https://help.github.com/en/github/using-git/changing-a-remotes-url#switching-remote-urls-from-ssh-to-https">switching remote urls</a></li>
</ul>

<hr />
<p><br /></p>

<h3 id="-3-searching-for-files-and-creating-an-archive-out-of-them"><a name="3"></a> 3. Searching for files and creating an archive out of them</h3>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh">find <span class="nb">.</span> <span class="nt">-type</span> f <span class="se">\(</span> <span class="nt">-name</span> file1 <span class="nt">-o</span> <span class="nt">-name</span> file2 <span class="se">\)</span> | zip -@ <span class="nt">-j</span> files
<span class="nb">mv </span>files.zip ~/tmp
<span class="nb">cd</span> <span class="nv">$_</span>
xdg-open .</code></pre></figure>

<p>First we search in the current <code class="highlighter-rouge">.</code> directory for entries denoting files <code class="highlighter-rouge">-type f</code> having the name <code class="highlighter-rouge">-name</code> <em>file1</em> or <code class="highlighter-rouge">-o</code> <em>file2</em>.
The <code class="highlighter-rouge">zip</code> command takes the list of files <code class="highlighter-rouge">-@</code> and creates an archive with the name <em>files</em> containing only the files without
storing the directories where they reside. After moving <code class="highlighter-rouge">mv</code> the archive to the <em>tmp</em> directory we <code class="highlighter-rouge">cd</code> into it, <code class="highlighter-rouge">$_</code> references the
last argument of the previous command, and open <code class="highlighter-rouge">xdg-open</code> the current directory <code class="highlighter-rouge">.</code> with the appropriate program - in my case this is <em>Files</em>.</p>

<p><strong>Resources:</strong></p>

<ul>
  <li>feel free to use the <code class="highlighter-rouge">man</code> command to read more about the commands above:
    <ul>
      <li><code class="highlighter-rouge">man find</code></li>
      <li><code class="highlighter-rouge">man zip</code></li>
    </ul>
  </li>
</ul>

<hr />
<p><br /></p>

<h3 id="-4-manage-processes-from-the-terminal"><a name="4"></a> 4. Manage processes from the Terminal</h3>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="c"># display Linux processes</span>
top

<span class="c"># top improved, you might need to install it</span>
htop

<span class="c"># list all running processes and look for a specific process</span>
ps <span class="nt">-A</span> | <span class="nb">grep </span>chrome

<span class="c"># display processes in a tree like format</span>
pstree

<span class="c"># look up a process based on name</span>
pgrep chome

<span class="c"># kills process identified by the PID, use -9 or -KILL to force kill</span>
<span class="nb">kill </span>PID

<span class="c"># kill process given its name</span>
pkill chrome
killall chrome

<span class="c"># allows killing graphical programs</span>
<span class="c"># run it and your cursor will turn into x, then click a program's window</span>
xkill</code></pre></figure>

<p><strong>Resources:</strong></p>

<ul>
  <li>feel free to use the <code class="highlighter-rouge">man</code> command to read more about the commands above</li>
</ul>

<hr />
<p><br /></p>

<h3 id="-5-print-content-of-path-line-by-line"><a name="5"></a> 5. Print content of $PATH line-by-line</h3>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nb">echo</span> <span class="nv">$PATH</span> | <span class="nb">tr</span> <span class="s1">':'</span> <span class="s1">'\n'</span></code></pre></figure>

<p>Pipes the content, obtained via <code class="highlighter-rouge">echo</code>, of the <code class="highlighter-rouge">PATH</code> variable into the translate <code class="highlighter-rouge">tr</code> command which
replaces each occurrence of <code class="highlighter-rouge">:</code> with a new line <code class="highlighter-rouge">\n</code>.</p>

<p>Another example:</p>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nb">echo </span>line1:line2 | <span class="nb">tr</span> <span class="s1">':'</span> <span class="s1">'\n'</span>
line1
line2</code></pre></figure>

<p><strong>Resources:</strong></p>

<ul>
  <li>feel free to use <code class="highlighter-rouge">man tr</code> to read more about the command</li>
</ul>

<hr />
<p><br /></p>

<h3 id="-6-show-all-users"><a name="6"></a> 6. Show all users</h3>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nb">cat</span> /etc/passwd | <span class="nb">awk</span> <span class="nt">-F</span>: <span class="s1">'{print$1}'</span></code></pre></figure>

<p>The content of the file <code class="highlighter-rouge">passwd</code> is pipped into the <code class="highlighter-rouge">awk</code>, which takes each line
and splits it into columns by the defined <code class="highlighter-rouge">-F</code> separator <code class="highlighter-rouge">:</code>
printing out the first value (the user name).</p>

<p><strong>Resources:</strong></p>

<ul>
  <li><code class="highlighter-rouge">man awk</code> to read more about <code class="highlighter-rouge">awk</code> language</li>
</ul>

<hr />
<p><br /></p>

<h3 id="-7-show-all-hidden-files"><a name="7"></a> 7. Show all hidden files</h3>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nb">ls</span> <span class="nt">-lap</span> | <span class="nb">grep</span> <span class="nt">-v</span> / | <span class="nb">awk</span> <span class="s1">'{print $9}'</span> | <span class="nb">grep</span> <span class="s1">'^\.'</span></code></pre></figure>

<p>List <code class="highlighter-rouge">ls</code> all <code class="highlighter-rouge">-a</code> content of the current directory using the long listing format <code class="highlighter-rouge">-l</code> appending <code class="highlighter-rouge">-p</code> a forward slash <code class="highlighter-rouge">/</code> if the entry is a directory, then print only those lines which do not end with a forward slash (<code class="highlighter-rouge">grep</code> performs a pattern matching, while <code class="highlighter-rouge">-v</code> inverts the match). <code class="highlighter-rouge">awk</code> prints out the nineth column of the line - the name, and the last <code class="highlighter-rouge">grep</code> shows only those which begin with a <code class="highlighter-rouge">.</code>.</p>


    </div><a class="u-url" href="/shell-magic" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
    <data class="u-url" href="/"></data>
    <div class="wrapper">
        <h2 class="footer-heading">Vlad&#39;s Blog</h2>
        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list">
                    <li class="p-name">Vlad&#39;s Blog</li></ul>
            </div>
            <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/vladflore"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">vladflore</span></a></li><li><a href="https://www.twitter.com/vlad_flore"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">vlad_flore</span></a></li></ul>
</div>
            <div class="footer-col footer-col-3">
                <p>A place to share stuff about IT and life.</p>
            </div>
        </div>
        <div align="center" class="copyright">
            &copy; Vlad Flore 2020 | All rights reserved<br>
            powered by <a href="https://jekyllrb.com/" target="_blank">jekyll</a> and <a href="https://github.com/jekyll/minima" target="_blank">minima theme</a>
        </div>
    </div>
</footer>
</body>

</html>
